<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>BlueAI 1.0 â€“ KI Copilot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #020617;
      --bg-soft: #02081a;
      --bg-elevated: #020b24;
      --accent: #2563eb;
      --accent-2: #4f46e5;
      --accent-soft: rgba(37, 99, 235, 0.18);
      --border-subtle: rgba(148, 163, 184, 0.35);
      --text: #e5e7eb;
      --text-soft: #9ca3af;
      --danger: #ef4444;
      --success: #22c55e;
      --radius-xl: 22px;
      --radius-lg: 16px;
      --radius-md: 10px;
      --radius-sm: 6px;
      --shadow-strong: 0 30px 80px rgba(15, 23, 42, 0.95);
      --shadow-soft: 0 18px 45px rgba(15, 23, 42, 0.85);
      --font-sans: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top, #020617 0, #000 55%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: stretch;
      justify-content: center;
    }

    /* AUTH SCREEN */

    .auth-screen {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #020617 0, #000 60%);
      z-index: 50;
    }

    .auth-shell {
      width: 100%;
      max-width: 960px;
      padding: 24px;
    }

    .auth-card {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
      gap: 20px;
      border-radius: 28px;
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #000 100%);
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: var(--shadow-strong);
      overflow: hidden;
      position: relative;
    }

    .auth-left {
      padding: 26px 26px 22px 26px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.25), #020617 55%);
    }

    .auth-brand-row {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-logo {
      width: 40px;
      height: 40px;
      border-radius: 999px;
      background: conic-gradient(from 180deg, #0ea5e9, #2563eb, #4f46e5, #0ea5e9);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9), 0 18px 40px rgba(37, 99, 235, 0.9);
    }

    .brand-logo-inner {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #e0f2fe 0, #1d4ed8 45%, #020617 100%);
      box-shadow: inset 0 0 0 1px rgba(15, 23, 42, 0.9);
    }

    .brand-text-main {
      font-weight: 600;
      letter-spacing: 0.04em;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .brand-badge {
      font-size: 10px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(37, 99, 235, 0.2);
      border: 1px solid rgba(96, 165, 250, 0.6);
      color: #bfdbfe;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .brand-sub {
      font-size: 12px;
      color: var(--text-soft);
      margin-top: 2px;
    }

    .auth-title {
      font-size: 22px;
      font-weight: 500;
    }

    .auth-sub {
      font-size: 13px;
      color: var(--text-soft);
      max-width: 420px;
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 4px;
    }

    .auth-label {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #9ca3af;
    }

    .auth-input {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      padding: 9px 13px;
      font-size: 13px;
      color: var(--text);
      outline: none;
    }

    .auth-input::placeholder {
      color: #6b7280;
    }

    .auth-btn-row {
      display: flex;
      gap: 8px;
      margin-top: 4px;
      flex-wrap: wrap;
    }

    .auth-btn {
      border-radius: 999px;
      border: none;
      padding: 9px 16px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      box-shadow: 0 14px 32px rgba(37, 99, 235, 0.9);
      white-space: nowrap;
    }

    .auth-btn.secondary {
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--text);
      box-shadow: none;
    }

    .auth-message {
      font-size: 11px;
      margin-top: 4px;
      min-height: 14px;
    }

    .auth-message.error {
      color: var(--danger);
    }

    .auth-message.success {
      color: var(--success);
    }

    .auth-meta-row {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      font-size: 11px;
      color: #9ca3af;
      flex-wrap: wrap;
    }

    .auth-chip {
      border-radius: 999px;
      padding: 4px 8px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .auth-chip-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
    }

    .auth-right {
      padding: 26px 24px 22px 0;
      position: relative;
      overflow: hidden;
    }

    .auth-right-card {
      border-radius: 20px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), #020617);
      border: 1px solid rgba(148, 163, 184, 0.4);
      padding: 14px 14px 12px 14px;
      box-shadow: var(--shadow-soft);
      font-size: 12px;
      color: var(--text-soft);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .auth-right-title {
      font-size: 13px;
      font-weight: 500;
      color: var(--text);
    }

    .auth-right-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 4px;
    }

    .auth-right-pill {
      border-radius: 999px;
      padding: 6px 8px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.95);
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .auth-right-pill-label {
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      font-size: 10px;
    }

    .auth-right-pill-value {
      color: var(--text);
    }

    .auth-right-footer {
      font-size: 11px;
      color: #6b7280;
      margin-top: 4px;
    }

    @media (max-width: 800px) {
      .auth-card {
        grid-template-columns: minmax(0, 1fr);
      }
      .auth-right {
        padding: 0 18px 18px 18px;
      }
    }

    /* APP SHELL */

    .app-shell {
      display: none;
      width: 100%;
      max-width: 1280px;
      margin: 20px;
      border-radius: 26px;
      overflow: hidden;
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #000 100%);
      border: 1px solid rgba(148, 163, 184, 0.25);
      box-shadow: var(--shadow-strong);
    }

    .sidebar {
      width: 280px;
      background: radial-gradient(circle at top left, #020617 0, #020617 40%, #020617 100%);
      border-right: 1px solid rgba(148, 163, 184, 0.2);
      padding: 18px 16px 16px 16px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .sidebar-brand-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 4px;
    }

    .sidebar-brand-text-main {
      font-weight: 600;
      letter-spacing: 0.04em;
      font-size: 16px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .sidebar-brand-sub {
      font-size: 11px;
      color: var(--text-soft);
    }

    .sidebar-section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: #6b7280;
      margin-top: 4px;
      margin-bottom: 4px;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chip {
      font-size: 11px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.35);
      color: var(--text);
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.18), rgba(15, 23, 42, 0.95));
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
    }

    .chip-pill {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: #9ca3af;
    }

    .sidebar-card {
      border-radius: 18px;
      padding: 12px 12px 10px 12px;
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.18), rgba(15, 23, 42, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: var(--shadow-soft);
      font-size: 12px;
      color: var(--text-soft);
    }

    .sidebar-card-title {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 4px;
      color: var(--text);
    }

    .sidebar-metric-row {
      display: flex;
      gap: 8px;
      margin-top: 6px;
    }

    .sidebar-metric {
      flex: 1;
      border-radius: 999px;
      padding: 6px 8px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 10px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .sidebar-metric-label {
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .sidebar-metric-value {
      color: var(--text);
      font-size: 11px;
    }

    .sidebar-footer {
      margin-top: auto;
      font-size: 11px;
      color: #6b7280;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
    }

    .sidebar-footer span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .logout-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.95);
      color: var(--text);
      padding: 6px 10px;
      font-size: 11px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .logout-btn:hover {
      background: rgba(31, 41, 55, 0.95);
    }

    /* MAIN */

    .main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 16px 16px 14px 16px;
      gap: 10px;
      position: relative;
      overflow: hidden;
    }

    .main-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .main-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .main-title span:first-child {
      font-size: 18px;
      font-weight: 500;
    }

    .main-title span:last-child {
      font-size: 12px;
      color: var(--text-soft);
    }

    .model-pill {
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 11px;
      border: 1px solid rgba(96, 165, 250, 0.7);
      background: radial-gradient(circle at top left, rgba(37, 99, 235, 0.3), rgba(15, 23, 42, 0.98));
      color: #dbeafe;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 26px rgba(37, 99, 235, 0.9);
    }

    .model-pill-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #22c55e;
    }

    .main-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.1fr);
      gap: 10px;
      flex: 1;
      min-height: 0;
    }

    @media (max-width: 980px) {
      .app-shell {
        margin: 0;
        border-radius: 0;
      }
      .main-grid {
        grid-template-columns: minmax(0, 1fr);
      }
      .sidebar {
        width: 240px;
      }
    }

    @media (max-width: 780px) {
      .app-shell {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        border-right: none;
        border-bottom: 1px solid rgba(148, 163, 184, 0.2);
      }
    }

    /* CHAT PANEL */

    .chat-shell {
      border-radius: var(--radius-xl);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), #020617);
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .chat-messages {
      flex: 1;
      padding: 14px 16px 10px 16px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 10px;
      scroll-behavior: smooth;
    }

    .chat-message {
      display: flex;
      gap: 10px;
      max-width: 90%;
    }

    .chat-message.user {
      margin-left: auto;
      flex-direction: row-reverse;
    }

    .avatar {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #e0f2fe 0, #1d4ed8 45%, #020617 100%);
      box-shadow: 0 0 0 1px rgba(15, 23, 42, 0.9);
      flex-shrink: 0;
    }

    .avatar.user {
      background: radial-gradient(circle at 30% 20%, #f97316 0, #ea580c 45%, #020617 100%);
    }

    .bubble {
      border-radius: 16px;
      padding: 8px 10px;
      font-size: 13px;
      line-height: 1.4;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.97);
      color: var(--text);
      position: relative;
      white-space: pre-wrap;
    }

    .chat-message.user .bubble {
      background: linear-gradient(135deg, rgba(37, 99, 235, 0.95), rgba(79, 70, 229, 0.95));
      border-color: rgba(129, 140, 248, 0.95);
    }

    .bubble-meta {
      font-size: 10px;
      color: var(--text-soft);
      margin-top: 4px;
    }

    .bubble-tag {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(148, 163, 184, 0.6);
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-top: 4px;
    }

    .bubble-tag-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    .chat-empty {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: 13px;
      color: var(--text-soft);
      padding: 0 40px;
    }

    .chat-empty span {
      display: block;
      margin-top: 6px;
      font-size: 12px;
      color: #6b7280;
    }

    .chat-input-row {
      padding: 10px 12px 10px 12px;
      border-top: 1px solid rgba(55, 65, 81, 0.9);
      display: flex;
      flex-direction: column;
      gap: 6px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), #020617);
    }

    .chat-input-main {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .chat-input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.97);
      padding: 8px 12px;
      font-size: 13px;
      color: var(--text);
      outline: none;
    }

    .chat-input::placeholder {
      color: #6b7280;
    }

    .chat-send-btn {
      border-radius: 999px;
      border: none;
      padding: 8px 12px;
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      box-shadow: 0 12px 30px rgba(37, 99, 235, 0.9);
      white-space: nowrap;
    }

    .chat-send-btn:disabled {
      opacity: 0.5;
      cursor: default;
      box-shadow: none;
    }

    .chat-input-meta {
      font-size: 10px;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .chat-input-meta span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .typing-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: #9ca3af;
      animation: pulse 1.2s infinite ease-in-out;
    }

    .typing-dot:nth-child(2) {
      animation-delay: 0.15s;
    }

    .typing-dot:nth-child(3) {
      animation-delay: 0.3s;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 0.3;
        transform: translateY(0);
      }
      50% {
        opacity: 1;
        transform: translateY(-2px);
      }
    }

    /* IMAGE PANEL */

    .image-shell {
      border-radius: var(--radius-xl);
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), #020617);
      border: 1px solid rgba(148, 163, 184, 0.4);
      box-shadow: var(--shadow-soft);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
    }

    .image-header {
      padding: 10px 14px 6px 14px;
      border-bottom: 1px solid rgba(55, 65, 81, 0.9);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      font-size: 12px;
    }

    .image-header-title {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .image-header-title span:first-child {
      font-weight: 500;
    }

    .image-header-title span:last-child {
      color: var(--text-soft);
      font-size: 11px;
    }

    .image-header-pill {
      border-radius: 999px;
      padding: 4px 8px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 10px;
      color: #9ca3af;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .image-header-pill span {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }

    .image-main {
      flex: 1;
      display: grid;
      grid-template-rows: minmax(0, 1fr) auto;
    }

    .image-preview {
      padding: 10px 12px 6px 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #020617, #000);
    }

    .image-preview-inner {
      width: 100%;
      max-width: 360px;
      aspect-ratio: 4 / 3;
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: radial-gradient(circle at top left, #0f172a, #020617);
      overflow: hidden;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .image-placeholder-text {
      font-size: 11px;
      color: #6b7280;
      text-align: center;
      padding: 0 16px;
    }

    .image-prompt-row {
      padding: 8px 12px 10px 12px;
      border-top: 1px solid rgba(55, 65, 81, 0.9);
      display: flex;
      flex-direction: column;
      gap: 6px;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.98), #020617);
    }

    .image-input-main {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .image-input {
      flex: 1;
      border-radius: 999px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      background: rgba(15, 23, 42, 0.97);
      padding: 8px 12px;
      font-size: 12px;
      color: var(--text);
      outline: none;
    }

    .image-input::placeholder {
      color: #6b7280;
    }

    .image-btn {
      border-radius: 999px;
      border: none;
      padding: 8px 12px;
      font-size: 12px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      box-shadow: 0 12px 30px rgba(37, 99, 235, 0.9);
      white-space: nowrap;
    }

    .image-meta {
      font-size: 10px;
      color: #6b7280;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      flex-wrap: wrap;
    }

    .image-meta span {
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .image-dot {
      width: 4px;
      height: 4px;
      border-radius: 999px;
      background: #22c55e;
    }
  </style>
</head>
<body>
  <!-- AUTH SCREEN -->
  <div class="auth-screen" id="authScreen">
    <div class="auth-shell">
      <div class="auth-card">
        <div class="auth-left">
          <div class="auth-brand-row">
            <div class="brand-logo">
              <div class="brand-logo-inner"></div>
            </div>
            <div>
              <div class="brand-text-main">
                BlueAI
                <span class="brand-badge">Model 1.0</span>
              </div>
              <div class="brand-sub">Dein persÃ¶nlicher KIâ€‘Copilot</div>
            </div>
          </div>

          <div>
            <div class="auth-title">Willkommen bei BlueAI 1.0</div>
            <div class="auth-sub">
              Melde dich an oder registriere dich, damit dein Chatâ€‘Verlauf und deine Bildâ€‘Prompts sicher in Firebase gespeichert werden.
            </div>
          </div>

          <form class="auth-form" id="authForm">
            <div>
              <div class="auth-label">Eâ€‘Mail</div>
              <input
                type="email"
                id="emailInput"
                class="auth-input"
                placeholder="you@example.com"
                required
              />
            </div>
            <div>
              <div class="auth-label">Passwort</div>
              <input
                type="password"
                id="passwordInput"
                class="auth-input"
                placeholder="Mindestens 6 Zeichen"
                required
              />
            </div>
            <div class="auth-btn-row">
              <button type="submit" class="auth-btn" id="loginBtn">
                Anmelden
              </button>
              <button type="button" class="auth-btn secondary" id="registerBtn">
                Registrieren
              </button>
            </div>
            <div class="auth-message" id="authMessage"></div>
          </form>

          <div class="auth-meta-row">
            <div class="auth-chip">
              <span class="auth-chip-dot"></span>
              Firebase Auth & Realtime Database aktiv
            </div>
            <div class="auth-chip">
              BlueAI speichert deinen Verlauf pro Nutzerâ€‘ID
            </div>
          </div>
        </div>

        <div class="auth-right">
          <div class="auth-right-card">
            <div class="auth-right-title">Was BlueAI 1.0 kann</div>
            <div>
              BlueAI 1.0 ist ein simuliertes KIâ€‘Modell in deiner eigenen OberflÃ¤che:
              Chatâ€‘Antworten, Bildâ€‘Promptâ€‘Generierung und ein Canvasâ€‘basierter Bildâ€‘Generator.
            </div>
            <div class="auth-right-grid">
              <div class="auth-right-pill">
                <div class="auth-right-pill-label">Chat</div>
                <div class="auth-right-pill-value">Kontextâ€‘sensitiv, mehrere Antwortâ€‘Modi</div>
              </div>
              <div class="auth-right-pill">
                <div class="auth-right-pill-label">Bild</div>
                <div class="auth-right-pill-value">Prompt + generiertes Canvasâ€‘Bild</div>
              </div>
              <div class="auth-right-pill">
                <div class="auth-right-pill-label">Speicherung</div>
                <div class="auth-right-pill-value">Pro Nutzer in Realtime Database</div>
              </div>
              <div class="auth-right-pill">
                <div class="auth-right-pill-label">Hosting</div>
                <div class="auth-right-pill-value">Singleâ€‘File, Netlifyâ€‘ready</div>
              </div>
            </div>
            <div class="auth-right-footer">
              Nach dem Login kommst du direkt in die BlueAIâ€‘Konsole mit Chat und Bildâ€‘Panel.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- APP SHELL -->
  <div class="app-shell" id="appShell">
    <aside class="sidebar">
      <div class="sidebar-brand-row">
        <div class="brand-logo">
          <div class="brand-logo-inner"></div>
        </div>
        <div>
          <div class="sidebar-brand-text-main">
            BlueAI
            <span class="brand-badge">1.0</span>
          </div>
          <div class="sidebar-brand-sub">Copilot OberflÃ¤che</div>
        </div>
      </div>

      <div>
        <div class="sidebar-section-title">Modi & FÃ¤higkeiten</div>
        <div class="chip-row">
          <div class="chip">
            <span class="chip-dot"></span>
            Konversation
          </div>
          <div class="chip">
            Bildâ€‘Generator
            <span class="chip-pill">Canvas</span>
          </div>
          <div class="chip">
            Promptâ€‘Engine
            <span class="chip-pill">Text â†’ Bildâ€‘Prompt</span>
          </div>
        </div>
      </div>

      <div class="sidebar-card">
        <div class="sidebar-card-title">BlueAI 1.0 Session</div>
        <div>
          Antworten werden in deinem privaten Verlauf gespeichert und als â€žPseudoâ€‘Trainingâ€œ genutzt, um Stilâ€‘Hinweise zu simulieren.
        </div>
        <div class="sidebar-metric-row">
          <div class="sidebar-metric">
            <div class="sidebar-metric-label">Nachrichten</div>
            <div class="sidebar-metric-value" id="metric-turns">0</div>
          </div>
          <div class="sidebar-metric">
            <div class="sidebar-metric-label">Bildâ€‘Prompts</div>
            <div class="sidebar-metric-value" id="metric-images">0</div>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        <span>
          <span class="status-dot"></span>
          BlueAI 1.0 ist bereit.
        </span>
        <button class="logout-btn" id="logoutBtn">
          âŽ‹ Abmelden
        </button>
        <span id="userInfo"></span>
      </div>
    </aside>

    <main class="main">
      <header class="main-header">
        <div class="main-title">
          <span>BlueAI Copilot Konsole</span>
          <span>Chat links, Bildâ€‘Generator rechts â€“ alles an einem Ort.</span>
        </div>
        <div class="model-pill">
          <span class="model-pill-dot"></span>
          BlueAI 1.0 Â· multimodalâ€‘ready
        </div>
      </header>

      <section class="main-grid">
        <!-- CHAT PANEL -->
        <div class="chat-shell">
          <div class="chat-messages" id="chatMessages">
            <div class="chat-empty" id="chatEmpty">
              Willkommen im BlueAIâ€‘Chat.<br />
              <span>
                Frag z.B.: â€žErklÃ¤re mir ein Themaâ€œ, â€žHilf mir beim Lernenâ€œ oder â€žErstelle einen Bildâ€‘Prompt fÃ¼r ein futuristisches Stadtâ€‘Posterâ€œ.
              </span>
            </div>
          </div>
          <div class="chat-input-row">
            <div class="chat-input-main">
              <input
                type="text"
                id="chatInput"
                class="chat-input"
                placeholder="Frage BlueAI etwas â€¦"
              />
              <button class="chat-send-btn" id="sendBtn">
                Senden
              </button>
            </div>
            <div class="chat-input-meta">
              <span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                BlueAI 1.0 generiert simulierte Antworten.
              </span>
              <span id="chatMetaHint">
                Verlauf wird in Firebase gespeichert.
              </span>
            </div>
          </div>
        </div>

        <!-- IMAGE PANEL -->
        <div class="image-shell">
          <div class="image-header">
            <div class="image-header-title">
              <span>BlueAI Bildâ€‘Generator</span>
              <span>Prompt â†’ Bildâ€‘Prompt + generiertes Canvasâ€‘Bild.</span>
            </div>
            <div class="image-header-pill">
              <span></span>
              BlueAI 1.0 Â· Visual Mode
            </div>
          </div>
          <div class="image-main">
            <div class="image-preview">
              <div class="image-preview-inner">
                <canvas id="imageCanvas" width="640" height="480"></canvas>
                <div class="image-placeholder-text" id="imagePlaceholder">
                  Noch kein Bild generiert.<br />
                  Gib rechts unten einen Prompt ein, z.B. â€žFuturistische Stadt bei Nacht mit Neonâ€‘Lichternâ€œ.
                </div>
              </div>
            </div>
            <div class="image-prompt-row">
              <div class="image-input-main">
                <input
                  type="text"
                  id="imagePromptInput"
                  class="image-input"
                  placeholder="Beschreibe das Bild, das du sehen willst â€¦"
                />
                <button class="image-btn" id="imageGenerateBtn">
                  Bild generieren
                </button>
              </div>
              <div class="image-meta">
                <span>
                  <span class="image-dot"></span>
                  BlueAI erzeugt einen detaillierten Bildâ€‘Prompt und zeichnet ein Canvasâ€‘Bild.
                </span>
                <span id="imageMetaHint">
                  Letzter Prompt: keiner
                </span>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script type="module">
    // Firebase v10 modular via CDN
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    import {
      getAuth,
      onAuthStateChanged,
      signInWithEmailAndPassword,
      createUserWithEmailAndPassword,
      signOut,
    } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";
    import {
      getDatabase,
      ref,
      push,
      onChildAdded,
      serverTimestamp,
      set,
    } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

    // Deine Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyDFFwtjglnwOc5gITw3FgQYP5vhaicWlIQ",
      authDomain: "blueai-eb780.firebaseapp.com",
      databaseURL: "https://blueai-eb780-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "blueai-eb780",
      storageBucket: "blueai-eb780.firebasestorage.app",
      messagingSenderId: "802037300238",
      appId: "1:802037300238:web:1a3dadb0e899a4721a105f",
      measurementId: "G-DC08K7LNRV",
    };

    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);
    const db = getDatabase(app);

    // AUTH UI
    const authScreen = document.getElementById("authScreen");
    const appShell = document.getElementById("appShell");
    const authForm = document.getElementById("authForm");
    const emailInput = document.getElementById("emailInput");
    const passwordInput = document.getElementById("passwordInput");
    const loginBtn = document.getElementById("loginBtn");
    const registerBtn = document.getElementById("registerBtn");
    const authMessage = document.getElementById("authMessage");

    // APP UI
    const logoutBtn = document.getElementById("logoutBtn");
    const userInfo = document.getElementById("userInfo");
    const metricTurns = document.getElementById("metric-turns");
    const metricImages = document.getElementById("metric-images");

    const chatMessages = document.getElementById("chatMessages");
    const chatEmpty = document.getElementById("chatEmpty");
    const chatInput = document.getElementById("chatInput");
    const sendBtn = document.getElementById("sendBtn");

    const imageCanvas = document.getElementById("imageCanvas");
    const imagePlaceholder = document.getElementById("imagePlaceholder");
    const imagePromptInput = document.getElementById("imagePromptInput");
    const imageGenerateBtn = document.getElementById("imageGenerateBtn");
    const imageMetaHint = document.getElementById("imageMetaHint");

    let currentUser = null;
    let messageCount = 0;
    let imageCount = 0;
    let isGenerating = false;

    function setAuthMessage(text, type = "error") {
      authMessage.textContent = text;
      authMessage.className = "auth-message " + (type === "error" ? "error" : "success");
    }

    function clearAuthMessage() {
      authMessage.textContent = "";
      authMessage.className = "auth-message";
    }

    function showApp(user) {
      currentUser = user;
      authScreen.style.display = "none";
      appShell.style.display = "flex";
      userInfo.textContent = "Angemeldet als: " + (user.email || user.uid);
      loadChatHistory();
    }

    function showAuth() {
      currentUser = null;
      authScreen.style.display = "flex";
      appShell.style.display = "none";
      userInfo.textContent = "";
      clearChatUI();
    }

    onAuthStateChanged(auth, (user) => {
      if (user) {
        showApp(user);
      } else {
        showAuth();
      }
    });

    authForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      clearAuthMessage();
      const email = emailInput.value.trim();
      const password = passwordInput.value.trim();
      if (!email || !password) {
        setAuthMessage("Bitte Eâ€‘Mail und Passwort eingeben.");
        return;
      }
      try {
        await signInWithEmailAndPassword(auth, email, password);
        setAuthMessage("Erfolgreich angemeldet.", "success");
      } catch (err) {
        setAuthMessage("Login fehlgeschlagen: " + (err.message || err.code));
      }
    });

    registerBtn.addEventListener("click", async () => {
      clearAuthMessage();
      const email = emailInput.value.trim();
      const password = passwordInput.value.trim();
      if (!email || !password) {
        setAuthMessage("Bitte Eâ€‘Mail und Passwort eingeben.");
        return;
      }
      try {
        await createUserWithEmailAndPassword(auth, email, password);
        setAuthMessage("Konto erstellt und angemeldet.", "success");
      } catch (err) {
        setAuthMessage("Registrierung fehlgeschlagen: " + (err.message || err.code));
      }
    });

    logoutBtn.addEventListener("click", async () => {
      await signOut(auth);
    });

    // CHAT LOGIK

    function clearChatUI() {
      chatMessages.innerHTML = "";
      chatMessages.appendChild(chatEmpty);
      messageCount = 0;
      metricTurns.textContent = "0";
    }

    function appendMessage({ from, text, meta, tag }) {
      if (chatEmpty.parentElement === chatMessages) {
        chatEmpty.remove();
      }
      const wrapper = document.createElement("div");
      wrapper.className = "chat-message " + (from === "user" ? "user" : "assistant");

      const avatar = document.createElement("div");
      avatar.className = "avatar" + (from === "user" ? " user" : "");

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = text;

      if (meta || tag) {
        const metaDiv = document.createElement("div");
        metaDiv.className = "bubble-meta";
        metaDiv.textContent = meta || "";
        bubble.appendChild(metaDiv);
      }

      if (tag) {
        const tagDiv = document.createElement("div");
        tagDiv.className = "bubble-tag";
        const dot = document.createElement("span");
        dot.className = "bubble-tag-dot";
        tagDiv.appendChild(dot);
        const label = document.createElement("span");
        label.textContent = tag;
        tagDiv.appendChild(label);
        bubble.appendChild(tagDiv);
      }

      wrapper.appendChild(avatar);
      wrapper.appendChild(bubble);
      chatMessages.appendChild(wrapper);
      chatMessages.scrollTop = chatMessages.scrollHeight;
      messageCount++;
      metricTurns.textContent = String(messageCount);
    }

    function addTypingIndicator() {
      const wrapper = document.createElement("div");
      wrapper.className = "chat-message assistant";
      wrapper.id = "typingIndicator";

      const avatar = document.createElement("div");
      avatar.className = "avatar";

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      const dots = document.createElement("div");
      dots.style.display = "inline-flex";
      dots.style.gap = "4px";
      ["", "", ""].forEach(() => {
        const d = document.createElement("span");
        d.className = "typing-dot";
        dots.appendChild(d);
      });
      bubble.appendChild(dots);

      wrapper.appendChild(avatar);
      wrapper.appendChild(bubble);
      chatMessages.appendChild(wrapper);
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function removeTypingIndicator() {
      const el = document.getElementById("typingIndicator");
      if (el) el.remove();
    }

    function pseudoBlueAIResponse(prompt, history) {
      const lower = prompt.toLowerCase();
      const turns = history.length;

      const styleHint =
        turns > 10
          ? "Ich versuche, deinen bisherigen Stil mÃ¶glichst genau zu spiegeln."
          : turns > 4
          ? "Ich nutze deinen bisherigen Verlauf als leichten Kontext."
          : "Ich antworte bewusst neutral und klar.";

      const baseIntro =
        "BlueAI 1.0 antwortet dir mit einem simulierten, aber strukturierten KIâ€‘Modell:\n\n";

      const isImagePrompt =
        lower.includes("bild") ||
        lower.includes("image") ||
        lower.includes("poster") ||
        lower.includes("logo") ||
        lower.includes("art") ||
        lower.includes("illustration");

      if (isImagePrompt) {
        return (
          baseIntro +
          "ðŸ”¹ Bildâ€‘Promptâ€‘Vorschlag:\n\n" +
          "Â» " +
          prompt +
          " Â«\n\n" +
          "Technische Details:\n" +
          "- Stil: hochauflÃ¶sende, cineastische Beleuchtung, weiche volumetrische Lichter\n" +
          "- Farbstimmung: krÃ¤ftige BlautÃ¶ne, Neonâ€‘Akzente, hoher Kontrast\n" +
          "- Kamera: 35mm, leichte Weitwinkelâ€‘Perspektive, TiefenschÃ¤rfe\n" +
          "- QualitÃ¤t: 4K, ultraâ€‘detailliert, scharfe Konturen\n\n" +
          "Du kannst diesen Prompt direkt in einem Bildâ€‘Generator (z.B. Midjourney, DALLÂ·E etc.) verwenden.\n\n" +
          styleHint
        );
      }

      if (lower.includes("erklÃ¤re") || lower.includes("erklÃ¤ren") || lower.includes("warum")) {
        return (
          baseIntro +
          "1. Ich fasse das Thema zuerst in einfachen Worten zusammen.\n" +
          "2. Danach gehe ich tiefer auf ZusammenhÃ¤nge und HintergrÃ¼nde ein.\n" +
          "3. Zum Schluss bekommst du eine Merkhilfe oder ein Beispiel.\n\n" +
          "Schreib mir gerne dazu, auf welchem Level du bist (Schule, Studium, Beruf), dann passe ich die ErklÃ¤rung an.\n\n" +
          styleHint
        );
      }

      if (lower.includes("code") || lower.includes("programm") || lower.includes("javascript")) {
        return (
          baseIntro +
          "Du willst etwas mit Code machen â€“ nice.\n\n" +
          "- Sag mir Sprache/Framework (z.B. JavaScript, React, Node).\n" +
          "- Beschreibe kurz dein Ziel (Loginâ€‘System, APIâ€‘Call, UIâ€‘Komponente, etc.).\n" +
          "- Ich skizziere dir dann einen klaren Ansatz mit Schritten.\n\n" +
          styleHint
        );
      }

      if (lower.includes("schule") || lower.includes("lernen") || lower.includes("prÃ¼fung")) {
        return (
          baseIntro +
          "Lernen funktioniert besser mit Struktur:\n\n" +
          "- Ich kann dir Zusammenfassungen in eigenen Worten bauen.\n" +
          "- Ich kann dir LernplÃ¤ne (z.B. 30â€‘Minutenâ€‘BlÃ¶cke) vorschlagen.\n" +
          "- Ich kann dir VerstÃ¤ndnisfragen geben, die du dir selbst stellen kannst.\n\n" +
          "Schreib mir Thema + Zeitrahmen (z.B. â€žMathe Klausur in 2 Wochen, Thema Bruchrechnungâ€œ), dann baue ich dir einen Plan.\n\n" +
          styleHint
        );
      }

      if (lower.includes("bewerbung") || lower.includes("lebenslauf") || lower.includes("cv")) {
        return (
          baseIntro +
          "Ich kann dir helfen mit:\n\n" +
          "- Formulierungen fÃ¼r Anschreiben\n" +
          "- Struktur fÃ¼r deinen Lebenslauf\n" +
          "- Ideen, wie du Projekte/Erfahrungen gut beschreibst\n\n" +
          "Schreib mir kurz: Jobâ€‘Titel, Branche und dein aktueller Stand, dann mache ich dir einen Vorschlag.\n\n" +
          styleHint
        );
      }

      return (
        baseIntro +
        "Ich habe deine Frage verstanden und wÃ¼rde so vorgehen:\n\n" +
        "- Zuerst klÃ¤re ich, worum es dir genau geht.\n" +
        "- Dann gebe ich dir eine strukturierte Antwort mit Bulletâ€‘Points.\n" +
        "- Wenn sinnvoll, bekommst du Beispiele oder Formulierungen, die du direkt nutzen kannst.\n\n" +
        "Wenn du mir mehr Kontext gibst (z.B. â€žfÃ¼r Social Mediaâ€œ, â€žfÃ¼r Schuleâ€œ, â€žfÃ¼r ein Projektâ€œ), kann ich die Antwort noch genauer auf dich zuschneiden.\n\n" +
        styleHint
      );
    }

    async function saveMessageToDB(userId, message) {
      try {
        const chatRef = ref(db, "chats/" + userId);
        const newRef = push(chatRef);
        await set(newRef, {
          from: message.from,
          text: message.text,
          createdAt: serverTimestamp(),
        });
      } catch (e) {
        console.warn("Fehler beim Speichern in Firebase:", e);
      }
    }

    function loadChatHistory() {
      if (!currentUser) return;
      clearChatUI();
      const chatRef = ref(db, "chats/" + currentUser.uid);
      onChildAdded(chatRef, (snapshot) => {
        const val = snapshot.val();
        if (!val) return;
        appendMessage({
          from: val.from,
          text: val.text,
          meta: val.from === "user" ? "Du" : "BlueAI 1.0",
        });
      });
    }

    async function handleSend() {
      if (!currentUser || isGenerating) return;
      const text = chatInput.value.trim();
      if (!text) return;
      chatInput.value = "";
      appendMessage({
        from: "user",
        text,
        meta: "Du",
      });
      await saveMessageToDB(currentUser.uid, { from: "user", text });

      isGenerating = true;
      sendBtn.disabled = true;
      addTypingIndicator();

      const history = []; // hier kÃ¶nntest du spÃ¤ter echten Verlauf Ã¼bergeben
      const responseText = pseudoBlueAIResponse(text, history);

      setTimeout(async () => {
        removeTypingIndicator();
        appendMessage({
          from: "assistant",
          text: responseText,
          meta: "BlueAI 1.0 Â· simulierte Antwort",
          tag: text.toLowerCase().includes("bild") ? "Bildâ€‘Prompt" : "Konversation",
        });
        await saveMessageToDB(currentUser.uid, { from: "assistant", text: responseText });
        isGenerating = false;
        sendBtn.disabled = false;
      }, 800 + Math.random() * 800);
    }

    chatInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        handleSend();
      }
    });

    sendBtn.addEventListener("click", handleSend);

    // IMAGE GENERATOR (Canvas, lokal)

    function drawGeneratedImage(prompt) {
      const ctx = imageCanvas.getContext("2d");
      const w = imageCanvas.width;
      const h = imageCanvas.height;

      // Hintergrundâ€‘Gradient basierend auf Promptâ€‘Hash
      let hash = 0;
      for (let i = 0; i < prompt.length; i++) {
        hash = (hash * 31 + prompt.charCodeAt(i)) >>> 0;
      }
      const hue1 = hash % 360;
      const hue2 = (hash * 3) % 360;

      const grad = ctx.createLinearGradient(0, 0, w, h);
      grad.addColorStop(0, `hsl(${hue1}, 80%, 18%)`);
      grad.addColorStop(1, `hsl(${hue2}, 80%, 8%)`);
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, w, h);

      // â€žNeonâ€‘Ringeâ€œ
      const rings = 6;
      for (let i = 0; i < rings; i++) {
        const radius = (Math.min(w, h) / 2) * (0.2 + i * 0.12);
        ctx.beginPath();
        ctx.arc(
          w / 2 + Math.sin(hash + i) * 20,
          h / 2 + Math.cos(hash + i) * 20,
          radius,
          0,
          Math.PI * 2
        );
        ctx.strokeStyle = `hsla(${(hue1 + i * 20) % 360}, 90%, 60%, 0.35)`;
        ctx.lineWidth = 3;
        ctx.stroke();
      }

      // Textâ€‘Overlay
      const shortPrompt =
        prompt.length > 60 ? prompt.slice(0, 57).trim() + "â€¦" : prompt.trim();
      ctx.fillStyle = "rgba(15, 23, 42, 0.85)";
      ctx.fillRect(16, h - 70, w - 32, 54);
      ctx.strokeStyle = "rgba(148, 163, 184, 0.6)";
      ctx.lineWidth = 1;
      ctx.strokeRect(16.5, h - 69.5, w - 33, 53);

      ctx.fillStyle = "#e5e7eb";
      ctx.font = "14px system-ui";
      ctx.fillText("BlueAI 1.0 â€“ generierter Prompt", 24, h - 48);
      ctx.fillStyle = "#9ca3af";
      ctx.font = "12px system-ui";
      ctx.fillText(shortPrompt || "Kein Prompt", 24, h - 28);

      imagePlaceholder.style.display = "none";
    }

    async function saveImagePromptToDB(userId, prompt) {
      try {
        const imgRef = ref(db, "imagePrompts/" + userId);
        const newRef = push(imgRef);
        await set(newRef, {
          prompt,
          createdAt: serverTimestamp(),
        });
      } catch (e) {
        console.warn("Fehler beim Speichern des Bildâ€‘Prompts:", e);
      }
    }

    function handleGenerateImage() {
      if (!currentUser) return;
      const prompt = imagePromptInput.value.trim();
      if (!prompt) return;
      drawGeneratedImage(prompt);
      imageCount++;
      metricImages.textContent = String(imageCount);
      imageMetaHint.textContent = "Letzter Prompt: " + (prompt.length > 40 ? prompt.slice(0, 37) + "â€¦" : prompt);
      saveImagePromptToDB(currentUser.uid, prompt);
    }

    imageGenerateBtn.addEventListener("click", handleGenerateImage);
    imagePromptInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        handleGenerateImage();
      }
    });

    // Initial Canvas leeren
    (function initCanvas() {
      const ctx = imageCanvas.getContext("2d");
      const w = imageCanvas.width;
      const h = imageCanvas.height;
      const grad = ctx.createLinearGradient(0, 0, w, h);
      grad.addColorStop(0, "#020617");
      grad.addColorStop(1, "#000000");
      ctx.fillStyle = grad;
      ctx.fillRect(0, 0, w, h);
    })();
  </script>
</body>
</html>
